# Don’t Build Multi-Agents
- URL: https://cognition.ai/blog/dont-build-multi-agents
- Added At: 2025-06-13 04:04:49
- [Link To Text](2025-06-13-don’t-build-multi-agents_raw.md)

## Summary
**摘要**：本文探讨了构建AI代理时应遵循的“上下文工程”原则，核心观点是多代理架构在当前阶段（2025年）存在致命缺陷。作者通过构建“Flappy Bird克隆”案例展示了多代理系统中常见的上下文断裂问题：子代理因缺乏完整上下文会产生相互矛盾的结果。文章提出两个核心原则：1）共享完整上下文和历史轨迹，而非单条消息；2）行动隐含决策，冲突决策导致不良结果。最优解决方案是使用单线程线性代理保持上下文连续性；对于超长任务，建议引入专门压缩历史信息的LLM模型。文章最后指出当前多代理协作系统过于脆弱，决策过于分散且难以共享完整上下文，建议优先改进单线程代理的通信能力。文中还分析了Claude Code和代码编辑模型的实际案例，展示了这些原则的应用场景。

**要点总结**：
1. **上下文工程是AI代理可靠性的核心**：文章提出"上下文工程"是构建长期运行AI代理的关键技术，指在动态系统中自动管理任务上下文的能力，这比传统"提示工程"更为复杂和重要。
2. **多代理架构存在根本缺陷**：通过"Flappy Bird克隆"案例展示多代理系统的典型故障模式：子代理因上下文断裂会产生不一致的输出（如不同美术风格的背景和角色），导致最终整合失败。
3. **两大基本原则**：(a)必须共享完整上下文和代理历史轨迹；(b)每个行动都包含隐含决策，冲突决策会产生不良结果——任何违反这两个原则的代理架构都应避免。
4. **单线程代理是最佳实践**：建议优先采用单线程线性代理架构以保持上下文连续性，对于超长任务可引入专用LLM模型来压缩历史信息，但需权衡实现复杂度。
5. **当前多代理协作系统不成熟**：虽然人类通过协商解决冲突效率很高，但2025年的AI代理尚不具备可靠的长时间跨代理通信能力，导致决策过于分散和上下文共享不足。
