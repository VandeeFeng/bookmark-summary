# Everything Wrong with MCP
- URL: https://blog.sshh.io/p/everything-wrong-with-mcp
- Added At: 2025-04-14 01:22:57
- [Link To Text](2025-04-14-everything-wrong-with-mcp_raw.md)

## Summary
**摘要**：
本文探讨了模型上下文协议（MCP）作为连接第三方数据和工具与大型语言模型（LLM）驱动的聊天和代理的新兴标准，在快速发展中存在的各种问题和局限性。文章首先解释了MCP的基本概念，即允许第三方工具和数据源构建插件，供用户添加到Claude、ChatGPT、Cursor等助手应用中，从而实现更高效的上下文提供和代理自主性。随后，作者深入分析了MCP在安全性、用户体验、成本、功能丰富性以及与LLM结合时引入的新风险。具体问题包括身份验证的复杂性、运行第三方代码带来的安全隐患、LLM不友好的人机交互界面、数据带宽成本高昂，以及LLM在安全方面的固有漏洞被放大等。此外，文章还讨论了第四方注入攻击的潜在风险，以及公司将内部数据连接到AI代理时可能导致的意外后果。最后，作者指出，用户对LLM能力的过度期望与LLM本身的局限性之间存在差距，强调解决这些问题需要协议设计、应用开发和用户教育三方面的共同努力。

**要点总结**：

1.  **身份验证复杂性与安全风险：** MCP最初版本未包含身份验证，导致各个MCP服务器采用不同的身份验证方式，为恶意利用留下了空间。即使后续尝试修复，也变得复杂。同时，MCP支持通过标准输入输出（stdio）运行本地服务器，这降低了用户运行第三方代码的门槛，增加了被攻击的风险，特别是当LLM介入执行用户意图时，安全问题更加突出。
2.  **人机交互不友好与操作风险：** MCP协议对LLM友好，但对人类用户不够友好。用户在使用具有多种已连接工具的助手时，容易因不重视操作风险而导致意外损失或信息泄露。即使MCP规范建议应用实施操作确认，用户也可能因为习惯而忽略，从而面临风险。
3.  **数据带宽成本与功能限制：** 在LLM应用中，数据带宽成本很高，MCP工具产生的大量数据会增加用户的服务费用。此外，MCP工具的结果目前仅限于同步文本、图像或音频，缺乏对富界面、异步更新和视觉保证的支持，这限制了其在某些场景下的应用，例如预订Uber或发布社交媒体帖子。
4.  **提示注入攻击与第四方风险：** MCP允许第三方工具作为系统提示的一部分，这使得这些工具能够覆盖代理行为，从而可能导致提示注入攻击。此外，MCP还存在第四方提示注入的风险，即第三方MCP服务器信任来自其他第三方的数据，而用户可能并不知情，这可能导致远程代码执行（RCE）或敏感数据泄露。
5.  **数据集成风险与LLM能力限制：** 即使员工的代理工具访问权限是其自身权限的子集，也可能因智能聚合数据而导致员工获取不应访问的敏感信息。同时，用户常常高估LLM的能力，认为提供更多数据和集成就能解决问题，但实际上，集成过多的工具可能会降低助手的性能并增加请求成本。
