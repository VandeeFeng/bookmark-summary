# My LLM codegen workflow atm
- URL: https://harper.blog/2025/02/16/my-llm-codegen-workflow-atm/
- Added At: 2025-02-22 02:35:45
- [Link To Text](2025-02-22-my-llm-codegen-workflow-atm_raw.md)

## Summary
**摘要**：
作者分享了自己目前使用LLM进行代码生成的经验和工作流程。对于新项目（Greenfield），流程包括使用LLM头脑风暴完善想法，生成详细的需求文档（spec.md）；然后，利用推理模型根据需求文档产出一个详细的分步骤计划（prompt_plan.md）和任务清单（todo.md）；最后，使用Claude或Aider等工具，按照计划逐步执行代码生成。对于现有项目（Non-greenfield），则侧重于增量迭代，首先使用repomix等工具提取代码上下文，然后利用LLM生成代码审查、Github issue、缺失测试等，再使用Claude或Aider逐步改进代码库。作者强调了规划步骤的重要性，以及测试对于保证代码质量的作用。并分享了一些常用的Prompt，用于挖掘现有代码库的改进点。同时表达了对目前LLM开发模式主要为单人模式的遗憾，以及对未来多人协作LLM开发工具的期待。最后，作者承认LLM加速了代码生成，但也带来了等待LLM完成任务的“空闲时间”，并分享了自己如何利用这些时间。

**要点总结**：

1.  **Greenfield项目的LLM代码生成流程**：首先，使用对话式LLM（如ChatGPT 4o）通过迭代提问的方式，从一个初步的想法开始，逐步完善并产出一个全面的、可直接给开发使用的需求规格文档（spec.md），其中包含了需求、架构选择、数据处理、错误处理和测试计划等各个方面。然后，将规格文档交给一个推理模型（如o1、o3或r1），让其产出一个详细的分步骤构建计划（prompt_plan.md），这个计划将整个项目分解为小的、可迭代的步骤，并为每个步骤生成相应的代码生成提示。
2.  **Non-greenfield项目的LLM代码生成流程**：对于在现有代码库上进行迭代或增量开发的项目，采用一种略有不同的方法，这种方法Planning是按Task完成的，而不是针对整个项目，但与上述类似。首先，利用repomix之类的工具从代码库中提取相关的上下文信息，并生成一个包含代码上下文的output.txt文件。然后，使用LLM工具（如simonw/LLM）和预定义的任务（如生成代码审查、GitHub issue、缺失测试等）来分析代码，并生成相应的改进建议。
3.  **Prompt在LLM代码生成中的应用**：Prompt在LLM代码生成中起着至关重要的作用，作者分享了一些用于代码审查、GitHub issue生成和缺失测试生成的Prompt示例，强调了Prompt的质量直接影响到LLM生成结果的有效性和准确性。
4.  **多人协作LLM开发的需求**：作者认为目前LLM代码生成工具主要面向单人开发者，缺乏有效的多人协作机制。多人协作可以带来更好的代码质量和更快的开发速度。作者呼吁开发出支持多人协作的LLM开发工具，以解决目前LLM开发模式的局限性。
5.  **有效管理LLM代码生成过程中的“空闲时间”**：LLM代码生成虽然加速了开发过程，但也带来了开发者等待LLM完成任务的“空闲时间”。可以利用这段时间进行其他任务，比如为其他项目进行头脑风暴、听音乐、玩游戏或者与朋友和机器人交流。
