# On inheritance and subtyping
- URL: https://blog.frankel.ch/on-inheritance/
- Added At: 2025-03-21 03:14:39
- [Link To Text](2025-03-21-on-inheritance-and-subtyping_raw.md)

## Summary
**摘要**：
作者回顾了自己学习Java作为职业生涯的第一门语言的经历，以及后来接触到的多种编程语言，这些经历让他对继承的概念有了更广阔的理解。文章探讨了Java中继承与子类型的紧密联系，即子类型实现了“IS A”关系，例如Rabbit类是Mammal类的子类型，从而继承了Mammal类的行为。接着，文章分析了Go语言在没有子类型的情况下如何实现继承，通过鸭子类型，如果一个结构体实现了接口的相同函数，那么它就隐式地实现了该接口。随后，文章深入研究了Python中继承的实现方式，包括子类型和基于类型的继承，以及通过实现`iter()`和`next()`等“魔法方法”实现的鸭子类型。最后，文章提到了PEP 544协议，它通过引入Protocol类，使得Python可以为自定义类提供静态鸭子类型。作者总结说，面向对象编程、继承和子类型等概念在不同语言中可能有不同的含义，理解这些差异对于用目标语言编写地道的代码至关重要，同时，熟悉不同于已知语言的特性，可以拓宽对编程的整体理解。

**要点总结**：
1.  Java中继承与子类型紧密相关，子类型通过“IS A”关系实现继承，例如`Rabbit`类是`Mammal`类的子类型，因此`Rabbit`实例可以像`Mammal`实例一样使用。这意味着在需要`Mammal`类型参数的方法中，可以传入`Rabbit`类型的实例。

2.  Go语言通过鸭子类型实现继承，即使没有显式的子类型关系，只要一个结构体实现了接口所需的所有方法，它就被认为是该接口的实现。例如，如果`Rabbit`结构体实现了`Animal`接口的`feed()`方法，那么`Rabbit`就被认为是`Animal`。

3.  Python同时支持显式继承和鸭子类型。显式继承类似于Java，通过子类继承父类的特性。鸭子类型则通过实现特定的“魔法方法”（如`__iter__()`和`__next__()`）来实现，使得类可以表现出某种类型的行为，例如，实现这两个方法的类可以被迭代。

4.  Python的PEP 544协议引入了静态鸭子类型，允许为自定义类定义“魔法方法”，从而实现隐式继承。通过继承`Protocol`类，类中定义的方法可以被其他类通过鸭子类型来实现，使得类型检查更加灵活。

5.  理解不同编程语言中继承和子类型的不同实现方式对于编写符合语言习惯的代码至关重要。学习新语言时，应特别关注那些在已知语言中不存在的特性，这有助于拓宽对编程的整体理解。

