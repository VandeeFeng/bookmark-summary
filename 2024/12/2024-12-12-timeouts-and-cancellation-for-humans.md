# Timeouts and cancellation for humans
- URL: https://vorpus.org/blog/timeouts-and-cancellation-for-humans/
- Added At: 2024-12-12 03:59:20
- [Link To Text](2024-12-12-timeouts-and-cancellation-for-humans_raw.md)

## Summary
**摘要**：
这篇文章探讨了在编程中处理超时与取消的需求。作者Vandee主要关注问题的根本原因，即现有的超时处理机制在不同编程环境下的不便和不一致性。作者检讨了简单超时、绝对截止时间、取消令牌以及Trio（作者自撰的一个专注于易于使用的I/O库）的取消范围等众多解决方案，并介绍了Trio实施的取消范围模型。这一模型致力于使超时和取消的交互便于使用者，以其独特的层级触发机制和范围匹配特性解决了某些问题。文章强调了当前超时处理方法的挑战，并提出Trio的解决方案为更广泛的应用提供借鉴，涉及同步Python、asyncio和其他编程语言。Vandee的最终目标是唤起编程社区对超时问题的重视并推广更实用的解决方案。

**要点总结**：
1. **简单超时机制**只适用于单个函数超时，缺乏抽象能力。
    * 它提供简单的解药，但无法解决所有情况。
    * 当在复杂代码中使用时，容易造成遗漏和混淆。
    * 解决方案是引入更高级的超时概念。

2. **绝对截止时间**在某些场景下表现良好，并支持操作的组合。
    * 使用起来相对直观，适用于需要顺序执行多个操作的场景。
    * 它却与不同编程环境兼容性不高，使用较为繁琐。
    * 尽管在实践中有效，但在不同环境下的实现复杂度较高。

3. **取消令牌**尝试封装取消状态，提供更灵活的超时解决方案。
    * 具有上下文触发特性，可适应不同程序需求。
    * 实际应用中，由于人处理问题的懒惰特性，其可靠性受到影响。
    * 增加使用便捷性，并能较好地用于常见编程场景。

4. **Trio的取消范围**提供了人性化的超时处理方法。
    * 具体包含了执行取消操作的机制，以及通过with语句定位所需操作的规则。
    * 通过异常处理机制，确保在超出固定时长的超时情况下能优雅退出。
    * 集成了与并发控制的一致性，简化了程序的复杂度。
    * 强调避免了结果与第三方依赖冲突，提供了全面管理超时与取消的解决方案。

5. **跨语言应用**概述了Trio取消范围在不同编程环境中的潜在应用。
    * 包括解决问题的异步特性在同步Python、与asyncio的兼容性、以及在其他编程语言中的实现。
    * 强调强调严谨的语法规则、上下文管理和错误处理在选定语言环境下的修正。
    * 拓展了通用解决方案的通用性与跨平台性，为编程领域提供更好的实践建议。

通过以上要点总结，文章展示了Vandee围绕超时与取消处理的系统解决策略，包括Trio取消范围的整体思路与效果，以及如何将其概念应用于其他软件环境中，以此提出直观、简洁和统一的解决方案，以优化编程过程中的性能与可靠性。
